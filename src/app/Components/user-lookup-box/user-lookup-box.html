<mat-form-field>
    <mat-label>Search User</mat-label>
    <div class="input-group">
        <input type="text" matInput [formControl]="searchUser"
            [matAutocomplete]="auto" />

    </div>

    @if (searchUser.hasError('minlength') && searchUser.touched) {
    <mat-error>
        Please enter at least 3 characters.
    </mat-error>
    }

    <!-- Add the spinner inside the form field, perhaps as a suffix -->
    @if (loading && searchUser.touched) {
    <mat-spinner matSuffix [diameter]="15"></mat-spinner>
    <!-- <div matSuffix class="loading-image-container">
<img src="preloader.png" alt="loading..." width="32" class="img-thumbnail"/>
</div> -->
    }

    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayUserFullName"
        (optionSelected)="onUserSelected($event.option.value)">
        @for (user of filteredUsers$ | async; track user) {
        <mat-option [value]="user">
            {{ user.fullName }}
        </mat-option>
        }
        @empty {
        <mat-option disabled>No users found</mat-option>
        }
    </mat-autocomplete>
</mat-form-field>
